<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" type="text/css" href="semantic/dist/semantic.min.css">
    <script
    src="https://code.jquery.com/jquery-3.1.1.min.js"
    integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
    crossorigin="anonymous"></script>
    <script src="semantic/dist/semantic.min.js"></script>
    <!-- <meta name='viewport' content='width=device-width, height=device-height, initial-scale=1.0, user-scalable=no'> -->
    <script type="text/javascript" src='/assets/js/lib.js'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.2/knockout-min.js"></script>
    <title>Document</title>
</head>
<style>
    table {
        margin: 50px;
    }
</style>

<body>
    <button class="ui button" data-bind="click: createEvent"> 新增Event </button>
    <!-- ko foreach: {data: events, as: 'event' } -->
    <table class="" border="1">

        <tbody>
            <tr>
                <!-- ko foreach: {data: theadOptions, as: 'theadOption' } -->
                <td>
                    <div class="ui input">
                        <span data-bind="text: '條件' + ($index() + 1)"></span>
                    </div>
                </td>
                <!-- /ko -->

                <td data-bind="attr: { rowspan: levels().length + 1 } " rowspan="3">
                    <button class="ui button" data-bind="click: function() { $root.createOption($index) } ">新增條件</button>
                </td>

                <!-- ko foreach: {data: theadWins, as: 'theadOption' } -->
                <td>
                    <div class="ui input">
                        <span data-bind="text: '獎勵' + ($index() + 1)"></span>
                    </div>
                </td>
                <!-- /ko -->

                <td data-bind="attr: { rowspan: levels().length + 1 } " rowspan="3">
                    <button class="ui button" data-bind="click: function() { $root.createWin($index) }">新增獎勵</button>
                </td>
            </tr>

            <!-- ko foreach: {data: levels, as: 'level' } -->
            <tr>
                <!-- ko foreach: {data: options, as: 'option' } -->
                <td>
                    <div class="ui input">
                        <button class="ui button blue" data-bind="
                        click: function() {
                            $root.choseNewOption($parentContext.$parentContext.$index,
                            function() {
                                return $parentContext.$index();
                            }, $index);
                        }">+</button>
                    </div>
                </td>
                <!-- /ko -->

                <!-- ko foreach: {data: wins, as: 'win' } -->
                <td>
                    <div class="ui input">
                        <button class="ui button blue" data-bind="
                        click: function() {
                            $root.choseNewWin($parentContext.$parentContext.$index,
                            function() {
                                return $parentContext.$index();
                            }, $index)
                        }
                        ">+</button>
                    </div>
                </td>
                <!-- /ko -->
            </tr>
            <!-- /ko -->

            <tr>
                <td>
                    <button class="ui button" data-bind="click: function() { $root.createLevel($index) } ">新增級別</button>
                </td>
            </tr>

        </tbody>
        <tfoot></tfoot>
    </table>
    <!-- /ko -->
</body>
<script type="text/javascript" src='/assets/js/task.js'></script>

</html>